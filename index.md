# Discord予定管理bot: 柄本RUN

<img src="image/run_emote.png" width="20%" />

- 2023/2/26 v0.2.2作成

## 目次

- [説明](#説明)
- [概要](#概要)
- [使い方](#使い方)
- [コマンド一覧](#コマンド一覧)

## 説明

- 柄本RUNは,Discord上で動作する予定管理botです.
- 卓の予定管理をスムーズに行う目的で作られました.
- サーバー参加者なら誰でも利用できます.

## 概要

### どんなことができるの？

#### 予定の管理

- Discord上で卓の予定を管理できます.
  - 卓の予定の閲覧,追加,更新,削除ができます.
    - さらに,予定の追加を行った時に,GMに対してGM権限を自動で付与してくれます.
    - さらにさらに,自動でその卓用のロールも作成し,GMとPLに付与します.
  - 管理はGoogleカレンダーを使います.

#### 予定の通知

- 卓の日になったら,Discord上で卓の予定を連絡してくれます.
  - 朝の8時に今日の予定を投稿します.
  - さらに,卓用のイベントも自動で作成してくれます.
- それ以外に,月次,週次の予定の連絡もしてくれます.
  - 毎月1日になると,その月の予定を連絡してくれます.
  - 毎週月曜日になると,その週の予定を連絡してくれます.

## 使い方

### 予定の管理のやりかた

- Work in progress...

### 予定の通知について

- Work in progress...

## コマンド一覧

### 予定の操作

#### /list-event

- カレンダーに登録された予定を取得します.

<dl>
  <dt>任意で指定する値</dt>
  <dd><dl>
    <dt>取得開始日</dt>
    <dd>
      予定の取得開始日を入力します.<br>
      <code>2023/3/1</code>のように,<code>年/月/日</code>で入力してください.<br>
      <code>3/1</code>のように年を省略してもOK.いい感じの年を自動的に設定します.<br>
      未設定の場合,自動で本日の日付を設定します.
    </dd>
    <dt>取得終了日</dt>
    <dd>
      で予定の取得終了日を入力します.<br>
      <code>2023/3/1</code>のように,<code>年/月/日</code>で入力してください.<br>
      <code>3/1</code>のように年を省略してもOK.いい感じの年を自動的に設定します.<br>
      未設定の場合,自動で<code>取得開始日</code>から4週間後の日付を設定します.
    </dd>
  </dl></dd>

  <dt>実行結果</dt>
  <dd>
    <code>取得開始日</code>から<code>取得終了日</code>の期間のカレンダー予定を取得します.<br>
    ただし10件まで.10件以上は取得できません.
  </dd>
</dl>

---

#### /add-event

- カレンダーに新しく予定を登録します.

<dl>
  <dt>必ず指定する値</dt>
  <dd><dl>
    <dt>卓タイトル</dt>
    <dd>
      卓のタイトルを入力します.
    </dd>
    <dt>開始日</dt>
    <dd>
      予定の開始日を入力します.<br>
      <code>2023/3/1</code>のように,<code>年/月/日</code>で入力してください.<br>
      <code>3/1</code>のように年を省略してもOK.いい感じの年を自動的に設定します.
    </dd>
    <dt>開催日数</dt>
    <dd>
      <code>2</code>のように,予定の開催日数を整数で入力します.<br>
      1日卓の場合は<code>1</code>,2日卓の場合は<code>2</code>と入力してください.
    </dd>
    <dt>ゲームマスター</dt>
    <dd>
      ゲームマスターとして主催するメンバーを設定します.<br>
      Discordのサーバーに存在するメンバーから選択できます.
    </dd>
    <dt>参加者1</dt>
    <dd>
      プレイヤーとして参加するメンバーを設定します.<br>
      Discordのサーバーに存在するメンバーから選択できます.
    </dd>
  </dl></dd>

  <dt>任意で指定する値</dt>
  <dd><dl>
    <dt>参加者2～8</dt>
    <dd>
      <code>参加者1</code>と同様に,プレイヤーとして参加するメンバーを設定します.<br>
      Discordのサーバーに存在するメンバーから選択できます.
    </dd>
    <dt>卓用ロール</dt>
    <dd>
      予定の参加者に付与するロールを設定します.<br>
      基本的に設定する必要はありません.<br>
      (設定しない場合,自動で<code>卓タイトル</code>から卓用のロール作成するため.)<br>
      予定より先にロールを作成した場合,他の卓のロールを使いたい場合に設定してください.
    </dd>
    <dt>その他特記事項</dt>
    <dd>
      上記の他に入れたいメッセージがある場合に設定します.<br>
      設定しなくてもOKです.
    </dd>
  </dl></dd>

  <dt>実行結果</dt>
  <dd>
    入力した値から予定を作成し,カレンダーに追加します.<br>
    また,<code>ゲームマスター</code>に設定したメンバーにGMロールと<code>卓用ロール</code>の付与を,<br>
    <code>参加者</code>に設定した参加者にも<code>卓用ロール</code>の付与を行います.<br>
    入力結果も確認できます.
  </dd>
</dl>

---

#### /update-event

- カレンダーの予定を更新します.

<dl>
  <dt>必ず指定する値</dt>
  <dd><dl>
    <dt>予定ID</dt>
    <dd>
      卓の予定IDを入力します.<br>
      予定IDは予定の取得を行ったさいに表示されます.コピーして利用してください.
    </dd>
  </dl></dd>

  <dt>任意で指定する値</dt>
  <dd><dl>
    <dt>卓タイトル</dt>
    <dd>
      卓のタイトルを入力します.<br>
      設定しない場合,更新を行いません.
    </dd>
    <dt>開始日</dt>
    <dd>
      予定の開始日を入力します.<br>
      <code>2023/3/1</code>のように,<code>年/月/日</code>で入力してください.<br>
      <code>3/1</code>のように年を省略してもOK.いい感じの年を自動的に設定します.<br>
      設定しない場合,更新を行いません.
    </dd>
    <dt>開催日数</dt>
    <dd>
      <code>2</code>のように,予定の開催日数を整数で入力します.<br>
      1日卓の場合は<code>1</code>,2日卓の場合は<code>2</code>と入力してください.<br>
      設定しない場合,更新を行いません.
    </dd>
    <dt>ゲームマスター</dt>
    <dd>
      ゲームマスターとして主催するメンバーを設定します.<br>
      Discordのサーバーに存在するメンバーから選択できます.<br>
      設定しない場合,更新を行いません.
    </dd>
    <dt>参加者1～8</dt>
    <dd>
      プレイヤーとして参加するメンバーを設定します.<br>
      Discordのサーバーに存在するメンバーから選択できます.<br>
      設定しない場合,更新を行いません.<br>
      1人でも設定した場合,既存の参加者が全て入れ替わるので注意.
    </dd>
    <dt>卓用ロール</dt>
    <dd>
      予定の参加者に付与するロールを設定します.<br>
      予定より先にロールを作成した場合,他の卓のロールを使いたい場合に設定してください.<br>
      設定しない場合,更新を行いません.
    </dd>
    <dt>その他特記事項</dt>
    <dd>
      上記の他に入れたいメッセージがある場合に設定します.<br>
      設定しない場合,更新を行いません.
    </dd>
  </dl></dd>

  <dt>実行結果</dt>
  <dd>
    <code>予定ID</code>の予定を更新し,カレンダーに反映します.<br>
    <dl>
      <dt><code>ゲームマスター</code>を更新した場合</dt>
      <dd>
        更新前のゲームマスターからGMロールと<code>卓用ロール</code>を剥ぎ取り,新しいゲームマスターに付与します.
      </dd>
      <dt><code>参加者</code>を更新した場合</dt>
      <dd>
        更新前の参加者から<code>卓用ロール</code>を剥ぎ取り,新しい参加者に付与します.<br>
        更新した場合,更新前の参加者は全て削除され,新しく設定した参加者のみを追加します.
      </dd>
      <dt><code>卓用ロール</code>を更新した場合</dt>
      <dd>
        更新前のゲームマスターと参加者から更新前の<code>卓用ロール</code>を剥ぎ取り,新しい<code>卓用ロール</code>を付与します.
      </dd>
    </dl>
    更新結果も確認できます.
  </dd>
</dl>

---

#### /copy-event

- カレンダーの予定をコピーします.

<dl>
  <dt>必ず指定する値</dt>
  <dd><dl>
    <dt>予定ID</dt>
    <dd>
      コピー元の予定の予定IDを入力します.<br>
      予定IDは予定の取得を行ったさいに表示されます.コピーして利用してください.
    </dd>
    <dt>開始日</dt>
    <dd>
      予定のコピー先の開始日を入力します.<br>
      <code>2023/3/1</code>のように,<code>年/月/日</code>で入力してください.<br>
      <code>3/1</code>のように年を省略してもOK.いい感じの年を自動的に設定します.<br>
    </dd>
  </dl></dd>

  <dt>任意で指定する値</dt>
  <dd><dl>
    <dt>卓タイトル</dt>
    <dd>
      卓のタイトルを入力します.<br>
      設定しない場合,コピー元の<code>卓タイトル</code>をそのまま利用します.
    </dd>
    <dt>開催日数</dt>
    <dd>
      <code>2</code>のように,予定の開催日数を整数で入力します.<br>
      1日卓の場合は<code>1</code>,2日卓の場合は<code>2</code>と入力してください.<br>
      設定しない場合,コピー元の<code>開催日数</code>をそのまま利用します.
    </dd>
  </dl></dd>

  <dt>実行結果</dt>
  <dd>
    <code>予定ID</code>の予定をコピーし,カレンダーに追加します.<br>
    コピー結果も確認できます.
  </dd>
</dl>

---

#### /delete-event

- カレンダーに登録された予定を削除します.
- 終了した卓の削除は必要ありません.間違って追加した場合などにご利用ください.

<dl>
  <dt>必ず指定する値</dt>
  <dd><dl>
    <dt>予定ID</dt>
    <dd>
      削除する予定の予定IDを入力します.<br>
      予定IDは予定の取得を行ったさいに表示されます.コピーして利用してください.
    </dd>
  </dl></dd>

  <dt>実行結果</dt>
  <dd>
    <code>予定ID</code>の予定を削除します.<br>
    <dl>
      <dt><code>ゲームマスター</code>が含まれている場合</dt>
      <dd>
        ゲームマスターからGMロールと<code>卓用ロール</code>を剥ぎ取ります.
      </dd>
      <dt><code>参加者</code>を更新した場合</dt>
      <dd>
        参加者から<code>卓用ロール</code>を剥ぎ取ります.
      </dd>
      <dt><code>卓用ロール</code>が含まれている場合</dt>
      <dd>
        <code>卓用ロール</code>を削除します.
      </dd>
    </dl>
    削除した予定も表示します.
  </dd>
</dl>

---

### その他機能

#### /hello

- 柄本RUNにあいさつします.あいさつは大事.
- あいさつが帰ってこない時は柄本RUNが止まっています.
連絡お願いします.

<dl>
  <dt>実行結果</dt>
  <dd>柄本RUNがコマンド実行者に挨拶します.</dd>
</dl>

---

#### /howto

- 柄本RUNの説明ページ,つまりこのページのリンクを表示します.

<dl>
  <dt>実行結果</dt>
  <dd>このページのリンクのメッセージを投稿します.</dd>
</dl>

---

#### /wakeup-call

- 指定したユーザーにメンションを50回飛ばします。
- 乱用厳禁。Kickされても知らないよ。

<dl>
  <dt>必ず指定する値</dt>
  <dd><dl>
    <dt>呼び出すメンバー</dt>
    <dd>Discordのサーバーに存在するメンバーを指定します.</dd>
  </dl></dd>

  <dt>実行結果</dt>
  <dd><code>呼び出すメンバー</code>のメンション50回分のメッセージを投稿します.</dd>
</dl>

---

## 作成者

- 蛯子えび
  - Twitter: [@eloorkani](https://twitter.com/eloorkani)
